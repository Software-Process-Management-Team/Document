# 后端接口方案
- 注：不考虑每个接口的安全验证问题，减少工作量
- 注2：如有疏漏请==**及时**==指正

## 用户信息部分

### 注册
- 接口方法：POST
- 接口格式：/register
- 接口参数：
	1. id：主键，唯一标识，varchar
	2. username：用户名，varchar
	3. password：密码，varchar
- 返回结果：
	- result：类型为字符串，可取值：“success”和“failed”

### 登录
- 接口方法：POST
- 接口格式：/login
- 接口参数：
	1. id：主键，唯一标识，varchar
	2. password：密码，varchar
- 返回结果：
	- result：类型为字符串，可取值：“success”和“failed”

### 更改用户名
- 接口方法：GET
- 接口格式：/changename
- 接口参数：
	1. id：同上
	2. newName：新的用户名，varchar
- 返回结果：
	- result：类型为字符串，可取值：“success”和“failed”

## 用户借书部分

### 搜索书籍
- 接口方法：GET
- 接口格式：/searchbook
- 接口参数：
	1. bookid：同上
	2. bookname：同上
	
	**注**：bookid和bookname只要有一个不空缺查询就有效，均为空无效
- 返回结果：
	- result：类型为字符串，可取值：“success”和“failed”
	- booklist：同上，但是每个book还得包含剩余存量信息（是否返回多本书籍可选，但是单本书的返回格式依然是数组）
- 返回示例：
	{
    		"result":"success",
    		"booklist":[
        		{
            			"bookname":"gaoshu",
            			"bookid":"001",
            			"booknum":"20"
        		},
        		{
           		 	"bookname":"wuli",
            			"bookid":"002",
            			"booknum":"40"
        		},
        		{
            			"bookname":"DB",
            			"bookid":"003",
            			"booknum":"30"
        		}
    		]
	}

### 查询某个用户预定的书
- 接口方法：GET
- 接口格式：/mybook
- 接口参数：
	1. id：同上
- 返回结果：
	- result：类型为字符串，可取值：“success”和“failed”
	- bookList：为book类型的数组
		- book：书籍的基本信息
			- bookid：书籍的id，主键，varchar
			- bookname：书籍的名字，varchar
			
			**注**：数据库还应该维护每本书籍的存量，每次增减也要做判定和更新，但是返回数据可以不带该属性

### 预定书籍
- 接口方法：GET
- 接口格式：/reserve
- 接口参数：
	1. bookid：同上
	2. id：同上（用户id）
- 返回结果：
	- result：类型为字符串，可取值：“success”和“failed”

### 评论书籍
- 接口方法：POST
- 接口格式：/comment
- 接口参数：
	1. bookid：同上
	2. id：同上（用户id）
	3. comment：评论内容，varchar
- 返回结果：
	- result：类型为字符串，可取值：“success”和“failed”

## 管理员部分

### 增加书籍
- 接口方法：GET
- 接口格式：/addbook
- 接口参数：
	1. bookid：同上
	2. bookname：同上
	3. booknum：书籍存量，unsigned int
- 返回结果：
	- result：类型为字符串，可取值：“success”和“failed”

### 移除书籍
- 接口方法：GET
- 接口格式：/removebook
- 接口参数：
	1. bookid：同上
- 返回结果：
	- result：类型为字符串，可取值：“success”和“failed”

### 更新书籍信息
- 接口方法：GET
- 接口格式：/reserve
- 接口参数：
	1. bookid：主键不可更改
	2. bookname：同上
	3. booknum：同上
	
	**注**：booknum和bookname只要有一个不空缺更新就有效，均为空无效
- 返回结果：
	- result：类型为字符串，可取值：“success”和“failed”
