# 后端接口方案
- 注：不考虑每个接口的安全验证问题，减少工作量
- 注2：如有疏漏请==**及时**==指正

## 用户信息部分

### 注册
- 接口方法：POST
- 接口格式：http://localhost:8080/register 参数放在body里
- 接口参数：
	1. id：主键，唯一标识，char11(固定学号，必须11位)
	2. username：用户名，varchar(可写可不写，前端不提交这个参数也不会报错)
	3. password：密码，varchar
- 返回结果：
	- result：类型为字符串，可取值：“success”和“failed”

### 登录
- 接口方法：POST
- 接口格式：http://localhost:8080/login 参数放在body
- 接口参数：
	1. id：主键，唯一标识，char11 (***实际上参数名是phoneNumber）
	2. password：密码，varchar
- 返回结果：
	- result：类型为字符串，可取值：“success”和“failed”

### 更改用户名
- 接口方法：GET
- 接口格式：/changename
- 接口参数：
	1. id：同上
	2. newName：新的用户名，varchar
- 返回结果：
	- result：类型为字符串，可取值：“success”和“failed”

### 注销
- 接口方法：POST
- 接口格式：http://localhost:8080/logout
- 无参数
- 返回应该跳回login页面

### 获取登录用户信息
- 接口方法：POST
- 接口形式：http://localhost:8080/getUserByCookie
- 返回信息：User对象
- 说明：在调用此接口之前用户必须登录，否则返回null

### 修改用户密码
- 接口方法：GET POST
- 接口形式：http://localhost:8080/updatePassword
- 返回信息：success成功修改 failed失败

### admin登录
- 接口方法：POST
- 接口形式http://localhost:8080/admin/logout
- 返回信息：success成功登录 failed失败

### admin注销
- 接口方法：GET
- 接口形式：http://localhost:8080/admin/logout
- 返回信息：success成功注销 failed失败

### 其他说明
 - 在未登录之前，访问除注册,登录的其他方法均会被拦截,调用接口均需登录之后再进行调用
 - 管理员页面的接口必须为/admin/** 否则会被拦截

## 用户借书部分

### 搜索书籍
- 接口方法：GET
- 接口格式：/searchbook
- 接口参数：
	1. bookid：同上
	2. bookname：同上
	
	**注**：bookid和bookname只要有一个不空缺查询就有效，均为空无效
- 返回结果：
	- result：类型为字符串，可取值：“success”和“failed”
	- booklist：同上，但是每个book还得包含剩余存量信息（是否返回多本书籍可选，但是单本书的返回格式依然是数组）
- 返回示例：
	{
    		"result":"success",
    		"booklist":[
        		{
            			"bookname":"gaoshu",
            			"bookid":"001",
            			"booknum":"20"
        		},
        		{
           		 	"bookname":"wuli",
            			"bookid":"002",
            			"booknum":"40"
        		},
        		{
            			"bookname":"DB",
            			"bookid":"003",
            			"booknum":"30"
        		}
    		]
	}

### 查询某个用户预定的书
- 接口方法：GET
- 接口格式：/mybook
- 接口参数：
	1. id：同上
- 返回结果：
	- result：类型为字符串，可取值：“success”和“failed”
	- bookList：为book类型的数组
		- book：书籍的基本信息
			- bookid：书籍的id，主键，varchar
			- bookname：书籍的名字，varchar
			
			**注**：数据库还应该维护每本书籍的存量，每次增减也要做判定和更新，但是返回数据可以不带该属性

### 预定书籍
- 接口方法：GET
- 接口格式：/reserve
- 接口参数：
	1. bookid：同上
	2. id：同上（用户id）
- 返回结果：
	- result：类型为字符串，可取值：“success”和“failed”

### 评论书籍
- 接口方法：POST
- 接口格式：/comment
- 接口参数：
	1. bookid：同上
	2. id：同上（用户id）
	3. comment：评论内容，varchar
- 返回结果：
	- result：类型为字符串，可取值：“success”和“failed”

## 管理员部分

### 增加书籍
- 接口方法：GET
- 接口格式：/addbook
- 接口参数：
	1. bookid：同上
	2. bookname：同上
	3. booknum：书籍存量，unsigned int
- 返回结果：
	- result：类型为字符串，可取值：“success”和“failed”

### 移除书籍
- 接口方法：GET
- 接口格式：/removebook
- 接口参数：
	1. bookid：同上
- 返回结果：
	- result：类型为字符串，可取值：“success”和“failed”

### 更新书籍信息
- 接口方法：GET
- 接口格式：/reserve
- 接口参数：
	1. bookid：主键不可更改
	2. bookname：同上
	3. booknum：同上
	
	**注**：booknum和bookname只要有一个不空缺更新就有效，均为空无效
- 返回结果：
	- result：类型为字符串，可取值：“success”和“failed”
